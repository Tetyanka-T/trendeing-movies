{"version":3,"sources":["components/GoBack/GoBack.js","components/MovieDetailsInfo/MovieDetailsInfo.jsx","components/MovieNavigation/MovieNavigation.jsx","pages/MovieDetailsPage/MovieDetailsPage.jsx","apiService/apiService.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/GoBack/GoBack.module.css","components/MovieDetailsInfo/MovieDetailsInfo.module.css","components/MovieNavigation/MovieNavigation.module.css"],"names":["ComeBackButton","history","useHistory","location","useLocation","routerState","useRef","useEffect","current","state","type","className","s","button_comeBack","onClick","url","params","push","goBack","MovieDetailsInfo","movie","releaseYear","release_date","slice","card","src","movieApi","poster_path","alt","title","width","height","discr","text","vote_average","overview","genre_list","genres","map","genre","genre_item","name","id","MovieNavigation","useRouteMatch","list","to","pathname","link","activeClassName","activeLink","Cast","lazy","Reviews","MovieDetailsPage","movieId","useParams","path","useState","setMovie","reqStatus","setReqStatus","a","Error","toast","error","onFetchMovie","GoBack","fallback","axios","defaults","baseURL","autKey","fetchTrendingMovies","get","response","movies","data","results","fetchSearchMovie","searchMovie","page","fetchMovieId","fullInfo","fetchMovieReviews","reviews","console","log","fetchMovieCast","cast","poster","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","module","exports"],"mappings":"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","file":"static/js/5.2afefed6.chunk.js","sourcesContent":["import { useRef, useEffect } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport s from './GoBack.module.css';\r\n\r\nconst ComeBackButton = () => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const routerState = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!routerState.current) {\r\n      routerState.current = location.state;\r\n    }\r\n  }, [location.state]);\r\n\r\n  const goBack = () => {\r\n    const url = routerState.current ? `?${routerState.current.params}` : '/';\r\n    history.push(url);\r\n  };\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      className={s.button_comeBack}\r\n      onClick={() => goBack()}\r\n    >\r\n      Back\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ComeBackButton;\r\n","import PropTypes from 'prop-types';\r\nimport * as movieApi from 'apiService/apiService';\r\nimport s from './MovieDetailsInfo.module.css';\r\n\r\nexport default function MovieDetailsInfo({ movie }) {\r\n  const releaseYear = movie.release_date.slice(0, 4);\r\n  return (\r\n    <div className={s.card}>\r\n      <img\r\n        src={movieApi.poster + movie.poster_path}\r\n        alt={movie.title}\r\n        width=\"290\"\r\n        height=\"402\"\r\n      />\r\n      <div className={s.discr}>\r\n        <h1>\r\n          {movie.title} ({releaseYear})\r\n        </h1>\r\n        <p>\r\n          <span className={s.text}> User score:</span> {movie.vote_average}\r\n        </p>\r\n        <p>\r\n          <span className={s.text}> Overview:</span> {movie.overview}\r\n        </p>\r\n        <ul className={s.genre_list}>\r\n          <span className={s.text}>Genres:</span>\r\n          {movie.genres.map(genre => (\r\n            <li className={s.genre_item} key={genre.id}>\r\n              {genre.name}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nMovieDetailsInfo.propTypes = {\r\n  movie: PropTypes.object.isRequired,\r\n};\r\n","import { useRouteMatch, useLocation } from 'react-router-dom';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport s from './MovieNavigation.module.css';\r\n\r\nexport default function MovieNavigation() {\r\n  const location = useLocation();\r\n  const { url } = useRouteMatch();\r\n\r\n  return (\r\n    <div>\r\n      <h2>Additional information:</h2>\r\n\r\n      <ul className={s.list}>\r\n        <li>\r\n          <NavLink\r\n            to={{\r\n              pathname: `${url}/cast`,\r\n              state: { ...location.state },\r\n            }}\r\n            className={s.link}\r\n            activeClassName={s.activeLink}\r\n          >\r\n            Cast\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink\r\n            to={{\r\n              pathname: `${url}/reviews`,\r\n              state: { ...location.state },\r\n            }}\r\n            className={s.link}\r\n            activeClassName={s.activeLink}\r\n          >\r\n            Reviews\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect, lazy, Suspense } from 'react';\r\nimport {\r\n  Route,\r\n  Switch,\r\n  useRouteMatch,\r\n  useParams,\r\n  useHistory,\r\n} from 'react-router-dom';\r\n\r\nimport { toast } from 'react-hot-toast';\r\nimport * as movieApi from 'apiService/apiService';\r\nimport { Spinner } from 'components/Loader/Loader';\r\nimport GoBack from 'components/GoBack/GoBack';\r\nimport MovieDetailsInfo from 'components/MovieDetailsInfo/MovieDetailsInfo';\r\nimport MovieNavigation from 'components/MovieNavigation/MovieNavigation';\r\n\r\nconst Cast = lazy(() =>\r\n  import('components/Cast/Cast.jsx' /* webpackChankName: \"cast\" */),\r\n);\r\nconst Reviews = lazy(() =>\r\n  import('components/Reviews/Reviews' /* webpackChankName: \"reviews\" */),\r\n);\r\n\r\nexport default function MovieDetailsPage() {\r\n  const { movieId } = useParams();\r\n\r\n  const history = useHistory();\r\n\r\n  const { path } = useRouteMatch();\r\n\r\n  const [movie, setMovie] = useState(null);\r\n  const [reqStatus, setReqStatus] = useState('idle');\r\n\r\n  useEffect(() => {\r\n    async function onFetchMovie() {\r\n      try {\r\n        setReqStatus('pending');\r\n        const movie = await movieApi.fetchMovieId(movieId);\r\n\r\n        if (!movie) {\r\n          history.push('/');\r\n\r\n          throw new Error();\r\n        }\r\n        setMovie(movie);\r\n        setReqStatus('resolved');\r\n      } catch (err) {\r\n        setReqStatus('rejected');\r\n        toast.error('Not found');\r\n      }\r\n    }\r\n    onFetchMovie();\r\n  }, [history, movieId]);\r\n\r\n  return (\r\n    <>\r\n      {reqStatus === 'pending' && <Spinner />}\r\n      <GoBack />\r\n      {movie && <MovieDetailsInfo movie={movie} />}\r\n\r\n      {movie && <MovieNavigation />}\r\n\r\n      <Suspense fallback={<Spinner />}>\r\n        <Switch>\r\n          <Route path={`${path}/cast`}>\r\n            <Cast />\r\n          </Route>\r\n\r\n          <Route path={`${path}/reviews`}>\r\n            <Reviews />\r\n          </Route>\r\n        </Switch>\r\n      </Suspense>\r\n    </>\r\n  );\r\n}\r\n","import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\r\nconst autKey = 'e46b87edbe0418b9678f5579382a8e13';\r\n\r\nexport const fetchTrendingMovies = async () => {\r\n  const response = await axios.get(`/trending/movie/week?api_key=${autKey}`);\r\n  const movies = response.data.results;\r\n\r\n  return movies;\r\n};\r\n\r\nexport const fetchSearchMovie = async (searchMovie, page) => {\r\n  const response = await axios.get(\r\n    `/search/movie?api_key=${autKey}&query=${searchMovie}&page=${page}&language=en-US`,\r\n  );\r\n  const movies = response.data.results;\r\n  return movies;\r\n};\r\n\r\nexport const fetchMovieId = async id => {\r\n  const response = await axios.get(\r\n    `/movie/${id}?api_key=${autKey}&language=en-US`,\r\n  );\r\n  const fullInfo = response.data;\r\n\r\n  return fullInfo;\r\n};\r\n\r\nexport const fetchMovieReviews = async id => {\r\n  const response = await axios.get(\r\n    `/movie/${id}/reviews?api_key=${autKey}&language=en-US`,\r\n  );\r\n  const reviews = response.data.results;\r\n  console.log(reviews);\r\n\r\n  return reviews;\r\n};\r\n\r\nexport const fetchMovieCast = async id => {\r\n  const response = await axios.get(\r\n    `/movie/${id}/credits?api_key=${autKey}&language=en-US`,\r\n  );\r\n  const cast = response.data.cast;\r\n\r\n  return cast;\r\n};\r\n\r\nexport const poster = 'https://image.tmdb.org/t/p/w500';\r\n","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button_comeBack\":\"GoBack_button_comeBack__3IG1y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"MovieDetailsInfo_card__1_zqx\",\"discr\":\"MovieDetailsInfo_discr__3fDtY\",\"text\":\"MovieDetailsInfo_text__fw62K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"MovieNavigation_list__36LH9\",\"link\":\"MovieNavigation_link__7lriW\",\"activeLink\":\"MovieNavigation_activeLink__gmf5b\"};"],"sourceRoot":""}